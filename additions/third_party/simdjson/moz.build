# -*- Mode: python; indent-tabs-mode: nil; tab-width: 40 -*-
# vim: set filetype=python:
# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

with Files("**"):
    BUG_COMPONENT = ("Core", "JSON: Simd Json Parser")

SOURCES += [
    "src/simdjson.cpp",
]

LOCAL_INCLUDES += [
    "include",
    "src",
]

EXPORTS.simdjson += [
    "include/simdjson/arm64.h",
    "include/simdjson/base.h",
    "include/simdjson/builtin.h",
    "include/simdjson/common_defs.h",
    "include/simdjson/compile_time_json-inl.h",
    "include/simdjson/compile_time_json.h",
    "include/simdjson/compiler_check.h",
    "include/simdjson/concepts.h",
    "include/simdjson/constevalutil.h",
    "include/simdjson/convert-inl.h",
    "include/simdjson/convert.h",
    "include/simdjson/dom.h",
    "include/simdjson/error-inl.h",
    "include/simdjson/error.h",
    "include/simdjson/fallback.h",
    "include/simdjson/haswell.h",
    "include/simdjson/icelake.h",
    "include/simdjson/implementation.h",
    "include/simdjson/implementation_detection.h",
    "include/simdjson/jsonioutil.h",
    "include/simdjson/jsonpathutil.h",
    "include/simdjson/lasx.h",
    "include/simdjson/lsx.h",
    "include/simdjson/minify.h",
    "include/simdjson/ondemand.h",
    "include/simdjson/padded_string-inl.h",
    "include/simdjson/padded_string.h",
    "include/simdjson/padded_string_view-inl.h",
    "include/simdjson/padded_string_view.h",
    "include/simdjson/portability.h",
    "include/simdjson/ppc64.h",
    "include/simdjson/simdjson.h",
    "include/simdjson/simdjson_version.h",
    "include/simdjson/westmere.h",
]

EXPORTS.simdjson.arm64 += [
    "include/simdjson/arm64/base.h",
    "include/simdjson/arm64/begin.h",
    "include/simdjson/arm64/bitmanipulation.h",
    "include/simdjson/arm64/bitmask.h",
    "include/simdjson/arm64/end.h",
    "include/simdjson/arm64/implementation.h",
    "include/simdjson/arm64/intrinsics.h",
    "include/simdjson/arm64/numberparsing_defs.h",
    "include/simdjson/arm64/ondemand.h",
    "include/simdjson/arm64/simd.h",
    "include/simdjson/arm64/stringparsing_defs.h",
]

EXPORTS.simdjson.builtin += [
    "include/simdjson/builtin/base.h",
    "include/simdjson/builtin/implementation.h",
    "include/simdjson/builtin/ondemand.h",
]

EXPORTS.simdjson.dom += [
    "include/simdjson/dom/array-inl.h",
    "include/simdjson/dom/array.h",
    "include/simdjson/dom/base.h",
    "include/simdjson/dom/document-inl.h",
    "include/simdjson/dom/document.h",
    "include/simdjson/dom/document_stream-inl.h",
    "include/simdjson/dom/document_stream.h",
    "include/simdjson/dom/element-inl.h",
    "include/simdjson/dom/element.h",
    "include/simdjson/dom/object-inl.h",
    "include/simdjson/dom/object.h",
    "include/simdjson/dom/parser-inl.h",
    "include/simdjson/dom/parser.h",
    "include/simdjson/dom/serialization-inl.h",
    "include/simdjson/dom/serialization.h",
]

EXPORTS.simdjson.fallback += [
    "include/simdjson/fallback/base.h",
    "include/simdjson/fallback/begin.h",
    "include/simdjson/fallback/bitmanipulation.h",
    "include/simdjson/fallback/end.h",
    "include/simdjson/fallback/implementation.h",
    "include/simdjson/fallback/numberparsing_defs.h",
    "include/simdjson/fallback/ondemand.h",
    "include/simdjson/fallback/stringparsing_defs.h",
]

EXPORTS.simdjson.generic += [
    "include/simdjson/generic/amalgamated.h",
    "include/simdjson/generic/atomparsing.h",
    "include/simdjson/generic/base.h",
    "include/simdjson/generic/dependencies.h",
    "include/simdjson/generic/dom_parser_implementation.h",
    "include/simdjson/generic/implementation_simdjson_result_base-inl.h",
    "include/simdjson/generic/implementation_simdjson_result_base.h",
    "include/simdjson/generic/jsoncharutils.h",
    "include/simdjson/generic/numberparsing.h",
]

EXPORTS.simdjson['generic/ondemand'] += [
    "include/simdjson/generic/ondemand/amalgamated.h",
    "include/simdjson/generic/ondemand/array-inl.h",
    "include/simdjson/generic/ondemand/array.h",
    "include/simdjson/generic/ondemand/array_iterator-inl.h",
    "include/simdjson/generic/ondemand/array_iterator.h",
    "include/simdjson/generic/ondemand/base.h",
    "include/simdjson/generic/ondemand/compile_time_accessors.h",
    "include/simdjson/generic/ondemand/dependencies.h",
    "include/simdjson/generic/ondemand/deserialize.h",
    "include/simdjson/generic/ondemand/document-inl.h",
    "include/simdjson/generic/ondemand/document.h",
    "include/simdjson/generic/ondemand/document_stream-inl.h",
    "include/simdjson/generic/ondemand/document_stream.h",
    "include/simdjson/generic/ondemand/field-inl.h",
    "include/simdjson/generic/ondemand/field.h",
    "include/simdjson/generic/ondemand/json_builder.h",
    "include/simdjson/generic/ondemand/json_iterator-inl.h",
    "include/simdjson/generic/ondemand/json_iterator.h",
    "include/simdjson/generic/ondemand/json_string_builder-inl.h",
    "include/simdjson/generic/ondemand/json_string_builder.h",
    "include/simdjson/generic/ondemand/json_type-inl.h",
    "include/simdjson/generic/ondemand/json_type.h",
    "include/simdjson/generic/ondemand/logger-inl.h",
    "include/simdjson/generic/ondemand/logger.h",
    "include/simdjson/generic/ondemand/object-inl.h",
    "include/simdjson/generic/ondemand/object.h",
    "include/simdjson/generic/ondemand/object_iterator-inl.h",
    "include/simdjson/generic/ondemand/object_iterator.h",
    "include/simdjson/generic/ondemand/parser-inl.h",
    "include/simdjson/generic/ondemand/parser.h",
    "include/simdjson/generic/ondemand/raw_json_string-inl.h",
    "include/simdjson/generic/ondemand/raw_json_string.h",
    "include/simdjson/generic/ondemand/serialization-inl.h",
    "include/simdjson/generic/ondemand/serialization.h",
    "include/simdjson/generic/ondemand/std_deserialize.h",
    "include/simdjson/generic/ondemand/token_iterator-inl.h",
    "include/simdjson/generic/ondemand/token_iterator.h",
    "include/simdjson/generic/ondemand/value-inl.h",
    "include/simdjson/generic/ondemand/value.h",
    "include/simdjson/generic/ondemand/value_iterator-inl.h",
    "include/simdjson/generic/ondemand/value_iterator.h",
]

EXPORTS.simdjson.haswell += [
    "include/simdjson/haswell/base.h",
    "include/simdjson/haswell/begin.h",
    "include/simdjson/haswell/bitmanipulation.h",
    "include/simdjson/haswell/bitmask.h",
    "include/simdjson/haswell/end.h",
    "include/simdjson/haswell/implementation.h",
    "include/simdjson/haswell/intrinsics.h",
    "include/simdjson/haswell/numberparsing_defs.h",
    "include/simdjson/haswell/ondemand.h",
    "include/simdjson/haswell/simd.h",
    "include/simdjson/haswell/stringparsing_defs.h",
]

EXPORTS.simdjson.icelake += [
    "include/simdjson/icelake/base.h",
    "include/simdjson/icelake/begin.h",
    "include/simdjson/icelake/bitmanipulation.h",
    "include/simdjson/icelake/bitmask.h",
    "include/simdjson/icelake/end.h",
    "include/simdjson/icelake/implementation.h",
    "include/simdjson/icelake/intrinsics.h",
    "include/simdjson/icelake/numberparsing_defs.h",
    "include/simdjson/icelake/ondemand.h",
    "include/simdjson/icelake/simd.h",
    "include/simdjson/icelake/stringparsing_defs.h",
]

EXPORTS.simdjson.internal += [
    "include/simdjson/internal/atomic_ptr.h",
    "include/simdjson/internal/dom_parser_implementation.h",
    "include/simdjson/internal/instruction_set.h",
    "include/simdjson/internal/jsoncharutils_tables.h",
    "include/simdjson/internal/jsonformatutils.h",
    "include/simdjson/internal/numberparsing_tables.h",
    "include/simdjson/internal/simdprune_tables.h",
    "include/simdjson/internal/tape_ref-inl.h",
    "include/simdjson/internal/tape_ref.h",
    "include/simdjson/internal/tape_type.h",
]

EXPORTS.simdjson.lasx += [
    "include/simdjson/lasx/base.h",
    "include/simdjson/lasx/begin.h",
    "include/simdjson/lasx/bitmanipulation.h",
    "include/simdjson/lasx/bitmask.h",
    "include/simdjson/lasx/end.h",
    "include/simdjson/lasx/implementation.h",
    "include/simdjson/lasx/intrinsics.h",
    "include/simdjson/lasx/numberparsing_defs.h",
    "include/simdjson/lasx/ondemand.h",
    "include/simdjson/lasx/simd.h",
    "include/simdjson/lasx/stringparsing_defs.h",
]

EXPORTS.simdjson.lsx += [
    "include/simdjson/lsx/base.h",
    "include/simdjson/lsx/begin.h",
    "include/simdjson/lsx/bitmanipulation.h",
    "include/simdjson/lsx/bitmask.h",
    "include/simdjson/lsx/end.h",
    "include/simdjson/lsx/implementation.h",
    "include/simdjson/lsx/intrinsics.h",
    "include/simdjson/lsx/numberparsing_defs.h",
    "include/simdjson/lsx/ondemand.h",
    "include/simdjson/lsx/simd.h",
    "include/simdjson/lsx/stringparsing_defs.h",
]

EXPORTS.simdjson.nonstd += [
    "include/simdjson/nonstd/string_view.hpp",
]

EXPORTS.simdjson.ppc64 += [
    "include/simdjson/ppc64/base.h",
    "include/simdjson/ppc64/begin.h",
    "include/simdjson/ppc64/bitmanipulation.h",
    "include/simdjson/ppc64/bitmask.h",
    "include/simdjson/ppc64/end.h",
    "include/simdjson/ppc64/implementation.h",
    "include/simdjson/ppc64/intrinsics.h",
    "include/simdjson/ppc64/numberparsing_defs.h",
    "include/simdjson/ppc64/ondemand.h",
    "include/simdjson/ppc64/simd.h",
    "include/simdjson/ppc64/stringparsing_defs.h",
]

EXPORTS.simdjson.westmere += [
    "include/simdjson/westmere/base.h",
    "include/simdjson/westmere/begin.h",
    "include/simdjson/westmere/bitmanipulation.h",
    "include/simdjson/westmere/bitmask.h",
    "include/simdjson/westmere/end.h",
    "include/simdjson/westmere/implementation.h",
    "include/simdjson/westmere/intrinsics.h",
    "include/simdjson/westmere/numberparsing_defs.h",
    "include/simdjson/westmere/ondemand.h",
    "include/simdjson/westmere/simd.h",
    "include/simdjson/westmere/stringparsing_defs.h",
]

LOCAL_INCLUDES += [
    "include",
]

FINAL_LIBRARY = "xul"